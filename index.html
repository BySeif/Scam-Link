<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>For Alya ğŸ’—ğŸ’Œ</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root{
  --pink1:#ffb6d9;
  --pink2:#ffd6eb;
  --accent:#ff2e88;
  --btn1:#ff4d9e;
}
html,body{height:100%;margin:0;}
body{
  font-family:"Poppins",system-ui,-apple-system,"Segoe UI",Roboto,Arial;
  background:linear-gradient(160deg,var(--pink1),var(--pink2));
  -webkit-font-smoothing:antialiased;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px;
  color:#222;
  overflow:hidden; /* IMPORTANT: outer page doesn't scroll; final card scrolls internally */
}

/* main center container (keeps start/question/final inside) */
.container{
  width:100%;
  max-width:720px;
  margin:0 auto;
  text-align:center;
  box-sizing:border-box;
}

/* glass card */
.card{
  background:rgba(255,255,255,0.12);
  backdrop-filter: blur(14px);
  padding:28px;
  border-radius:28px;
  box-shadow:0 20px 50px rgba(0,0,0,0.14);
  margin:12px 0;
}

/* envelope/start */
#envelope{
  width:220px;
  max-width:82vw;
  cursor:pointer;
  border-radius:14px;
  filter:drop-shadow(0 12px 26px rgba(0,0,0,0.18));
  transition:transform .28s ease;
}
#envelope:hover{ transform: translateY(-6px) rotate(-2deg) scale(1.02); }

.title{
  font-family:"Playfair Display", serif;
  color:var(--accent);
  margin:10px 0 8px 0;
  font-size:clamp(26px,4.6vw,44px);
}

/* open button */
.openBtn{
  background:linear-gradient(90deg,var(--btn1),#ff6fb0);
  color:white;
  border:none;
  padding:13px 36px;
  border-radius:36px;
  font-size:18px;
  box-shadow:0 10px 26px rgba(255,77,158,0.24);
  cursor:pointer;
}
.pulse{ animation:pulse 1.6s infinite; }
@keyframes pulse{ 0%{transform:scale(1);}50%{transform:scale(1.07);}100%{transform:scale(1);} }

/* question main image */
#mainPhoto{
  width:100%;
  max-height:55vh;      /* controlled size for phone */
  object-fit:cover;
  border-radius:22px;
  box-shadow:0 18px 40px rgba(0,0,0,0.18);
  margin-bottom:18px;
}

/* btn row */
.btnRow{ display:flex; gap:16px; justify-content:center; align-items:center; margin-top:8px; }
.yes, .no {
  border:none;
  padding:12px 28px;
  border-radius:32px;
  font-size:18px;
  cursor:pointer;
}
.yes{
  background:linear-gradient(90deg,#ff476e,#ff2e88);
  color:white;
  box-shadow:0 10px 22px rgba(255,46,136,.22);
  transform-origin:center;
}
.no{
  background:#5e5e5e;
  color:white;
  box-shadow:0 6px 14px rgba(0,0,0,0.12);
  position:relative;
}

/* final card (this one is scrollable internally only) */
.finalCard{
  background:rgba(255,255,255,0.12);
  backdrop-filter: blur(14px);
  padding:28px;
  border-radius:28px;
  box-shadow:0 22px 56px rgba(0,0,0,0.16);
  margin:12px 0;
  width:100%;
  max-height: calc(100vh - 40px); /* keep card inside viewport */
  overflow:auto;                 /* <--- only this card scrolls */
  -webkit-overflow-scrolling: touch;
}

/* final text and image */
#finalText{
  font-family:"Playfair Display", serif;
  font-size:clamp(22px,5.2vw,40px);
  color:var(--accent);
  text-shadow:0 8px 26px rgba(255,46,136,0.12);
  margin:12px 6px;
  line-height:1.06;
}
#finalPhoto{
  width:100%;
  max-height:58vh;
  object-fit:cover;
  border-radius:22px;
  box-shadow:0 20px 50px rgba(0,0,0,0.22);
  margin-top:12px;
}

/* extra section (inside finalCard) */
.extraSection{
  margin-top:18px;
  text-align:center;
  padding:18px;
}

/* new header for that section */
.extraHeader{
  font-family:"Playfair Display", serif;
  color:var(--accent);
  font-size:18px;
  margin-bottom:12px;
}

/* closed letter button */
#letterClosed{
  background:linear-gradient(90deg,#ffffff,#fff0f8);
  border-radius:14px;
  padding:12px 18px;
  display:inline-block;
  cursor:pointer;
  box-shadow:0 8px 24px rgba(0,0,0,0.12);
}

/* bouquet area */
#bouquetWrap{
  margin-top:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  flex-wrap:wrap;
}

/* emoji roses */
.rose{
  font-size:26px;
  transform:translateY(12px) scale(.95);
  opacity:0;
  transition: transform .6s cubic-bezier(.2,.9,.2,1), opacity .6s;
}
.bouquetVisible .rose{ transform:translateY(0) scale(1); opacity:1; }

/* bouquet image fallback */
#bouquetImg{
  max-width:320px;
  width:90%;
  border-radius:18px;
  box-shadow:0 12px 30px rgba(0,0,0,0.18);
  display:none;
  margin-top:12px;
}

/* letter box (hidden until opened) */
#letterBox{
  display:none;
  margin-top:14px;
  background:linear-gradient(180deg,#fffdfc,#fff7fb);
  padding:18px;
  border-radius:12px;
  max-width:680px;
  box-shadow:0 12px 30px rgba(0,0,0,0.12);
  color:#222;
  text-align:left;
  line-height:1.45;
  white-space:pre-line;
  border: 3px solid rgba(255,46,136,0.08);
}

/* framed modal letter */
#letterModal{
  position:fixed; left:0; right:0; top:0; bottom:0;
  display:none;
  align-items:center;
  justify-content:center;
  z-index:99999;
  background:rgba(0,0,0,0.25);
}
#letterCard{
  background:linear-gradient(180deg,#fff,#fff8fb);
  width:min(92vw,720px);
  border-radius:18px;
  padding:22px;
  box-shadow:0 30px 80px rgba(0,0,0,0.35);
  transform:scale(.98);
  transition: transform .22s ease, opacity .22s;
  position:relative;
}
#letterCard.show{ transform:scale(1); }

/* letter frame styling */
.letter-frame{
  border: 2px dashed rgba(255,46,136,0.18);
  padding:16px;
  border-radius:10px;
  background:linear-gradient(180deg,#fffdfc,#fff7fb);
}

/* close button */
#closeLetter{
  position:absolute;
  right:14px; top:12px;
  background:transparent;
  border:none;
  font-size:22px;
  cursor:pointer;
}

/* floating hearts + confetti */
.floating-heart{
  position:fixed;
  bottom:-20px;
  font-size:26px;
  pointer-events:none;
  animation:floatUp linear forwards;
}
@keyframes floatUp{ to{ transform:translateY(-120vh) rotate(180deg); opacity:0;} }

.confetti-piece{
  position:fixed;
  top:-20px;
  width:8px;
  height:12px;
  animation:fall linear forwards;
  pointer-events:none;
}
@keyframes fall{ to{ transform:translateY(120vh) rotate(360deg);} }

/* responsive tweaks */
@media(min-width:900px){
  #mainPhoto{ max-width:520px; }
  #finalPhoto{ max-width:640px; }
}
</style>
</head>
<body>
  <div class="container">

    <!-- START CARD (initial) -->
    <div class="card" id="startCard">
      <img id="envelope" src="envelope.png.jpg" alt="Envelope for Alya" onclick="openLetter()" />
      <h2 class="title">For AlyağŸ’—ğŸ’Œ</h2>
      <button class="openBtn pulse" onclick="openLetter()">Open</button>
    </div>

    <!-- where screens will appear; only finalCard will scroll internally -->
    <div id="screenHolder"></div>

  </div>

  <!-- letter modal (hidden) -->
  <div id="letterModal" aria-hidden="true">
    <div id="letterCard" role="dialog" aria-modal="true" aria-labelledby="letterTitle">
      <button id="closeLetter" onclick="closeModal()">âœ•</button>
      <div style="text-align:center; margin-bottom:8px; font-family:'Playfair Display', serif; color:var(--accent); font-size:20px;">A small note</div>
      <div class="letter-frame">
        <div id="modalLetterText" style="white-space:pre-line; color:#111; line-height:1.45;">
          <!-- >>> YOUR LETTER TEXT HERE >>> Replace the text below with your own message. Keep line breaks. -->
          Dear Alya,

          (Replace this text with your personal letter. Write whatever you want her to read.)

          Love,
          Seif
          <!-- <<< end editable area -->
        </div>
      </div>
    </div>
  </div>

<script>
/* ---------- globals ---------- */
window._heartsInterval = null;
window._confettiInterval = null;

/* ---------- open question screen (safe inline handlers) ---------- */
function openLetter(){
  const holder = document.getElementById('screenHolder');
  holder.innerHTML = `
    <div class="card" id="questionCard">
      <img id="mainPhoto" src="mainphoto.jpg" alt="Alya">
      <h2 style="margin:0; font-family:'Playfair Display', serif; color:#fff; text-shadow:0 4px 18px rgba(0,0,0,0.22); font-size:clamp(20px,5vw,32px);">Will you be my Valentine? ğŸ’–</h2>
      <div class="btnRow" style="margin-top:14px;">
        <button class="yes" id="yesBtn" onclick="showFinal()">Yes ğŸ’•</button>
        <button class="no" id="noBtn" onclick="noClicked(this)">No ğŸ˜¢</button>
      </div>
    </div>
  `;
  // stop any previous visuals (defensive)
  if(window._heartsInterval){ clearInterval(window._heartsInterval); window._heartsInterval = null; }
  if(window._confettiInterval){ clearInterval(window._confettiInterval); window._confettiInterval = null; }
}

/* ---------- NO button chaotic messages + move ---------- */
let _noIndex = 0;
let _yesScale = 1;
const messages = [
  "Are you sure? ğŸ¥º",
  "Really sure??",
  "PleaseeğŸ˜Š",
  "With a cherryâ¤ï¸",
  "Alya thatâ€™s kinda mean ğŸ˜”",
  "Think again...",
  "You dont love me"
];

function noClicked(el){
  if(_noIndex < messages.length){
    el.textContent = messages[_noIndex];
    _noIndex++;
  } else {
    el.textContent = "Still no? ğŸ˜­";
  }

  // grow Yes
  _yesScale += 0.32;
  const yes = document.getElementById('yesBtn');
  if(yes){ yes.style.transform = 'scale(' + _yesScale + ')'; yes.style.transition = 'transform .22s ease'; }

  // teleport No
  el.style.position = 'absolute';
  el.style.left = Math.min(86, 6 + Math.random()*78) + '%';
  el.style.top  = Math.min(82, 8 + Math.random()*72) + '%';
  el.style.zIndex = 9999;
}

/* ---------- show final (Yes) ---------- */
function showFinal(){
  const holder = document.getElementById('screenHolder');

  holder.innerHTML = `
    <div class="finalCard" id="finalCard">
      <div id="finalText">
        <div style="font-size:1rem; margin-bottom:8px; color:#ff2e88; font-family:'Poppins',sans-serif;">Love youuğŸ’</div>
        <div style="font-family:'Playfair Display', serif; color:#fff; text-shadow:0 6px 18px rgba(0,0,0,0.18);">
          You had no choice ğŸ˜ŒğŸ’•<br><br>Guess we have plans now ğŸ˜
        </div>
      </div>

      <img id="finalPhoto" src="finalphoto.jpg.jpg" alt="Us">

      <div class="extraSection">
        <div class="extraHeader">Here's your flowers (sorry they not realğŸ˜”)</div>

        <div id="letterClosed" onclick="openModal()">ğŸ“œ Open letter</div>

        <div id="bouquetWrap" aria-hidden="true">
          <!-- bouquetImg will show if you upload bouquet.jpg; otherwise the emoji roses show -->
          <img id="bouquetImg" src="bouquet.jpg" alt="bouquet" onerror="this.style.display='none'">
          <div id="emojiBouquet" class="">
            <div class="rose">ğŸŒ¹</div><div class="rose">ğŸŒ¹</div><div class="rose">ğŸŒ¹</div>
            <div class="rose">ğŸŒ¹</div><div class="rose">ğŸŒ¹</div><div class="rose">ğŸŒ¹</div>
            <div class="rose">ğŸŒ¹</div><div class="rose">ğŸŒ¹</div><div class="rose">ğŸŒ¹</div>
          </div>

        </div>

        <div id="letterBox"></div>
      </div>
    </div>
  `;

  // start sounds/visuals
  startHeartsContinuous();
  startConfettiContinuous();

  // bouquet reveal after a small delay
  setTimeout(()=>{
    const wrap = document.getElementById('bouquetWrap');
    if(!wrap) return;
    // try to use bouquetImg if it loaded
    const img = document.getElementById('bouquetImg');
    if(img && img.complete && img.naturalWidth !== 0){
      img.style.display='block';
      // maybe animate
      img.style.opacity='0';
      img.style.transform='scale(.98)';
      setTimeout(()=>{ img.style.transition='opacity .6s, transform .4s'; img.style.opacity='1'; img.style.transform='scale(1)'; },80);
    } else {
      // show emoji bouquet
      const emoji = document.getElementById('emojiBouquet');
      emoji.classList.add('bouquetVisible');
      // stagger each rose
      Array.from(emoji.children).forEach((r,i)=>{
        r.style.transitionDelay = (i*80) + 'ms';
        r.style.transform = 'translateY(0) scale(1)';
        r.style.opacity = '1';
      });
    }
  }, 450);
}

/* ---------- hearts + confetti ---------- */
function startHeartsContinuous(){
  if(window._heartsInterval) clearInterval(window._heartsInterval);
  window._heartsInterval = setInterval(()=>{
    const heart = document.createElement('div');
    heart.className = 'floating-heart';
    heart.innerHTML = 'ğŸ’–';
    heart.style.left = Math.random()*100 + 'vw';
    heart.style.fontSize = (18 + Math.random()*22) + 'px';
    heart.style.animationDuration = (3500 + Math.random()*2000) + 'ms';
    document.body.appendChild(heart);
    setTimeout(()=> heart.remove(), 8000);
  }, 420);
}

function startConfettiContinuous(){
  if(window._confettiInterval) clearInterval(window._confettiInterval);
  const colors = ['#ff2e88','#ffffff','#ffb6d9','#ff66b3','#ffd6eb','#ff4d9e'];
  window._confettiInterval = setInterval(()=>{
    const piece = document.createElement('div');
    piece.className = 'confetti-piece';
    piece.style.left = Math.random()*100 + 'vw';
    piece.style.backgroundColor = colors[Math.floor(Math.random()*colors.length)];
    piece.style.width = (6 + Math.random()*10) + 'px';
    piece.style.height = (8 + Math.random()*16) + 'px';
    piece.style.animationDuration = (2800 + Math.random()*2200) + 'ms';
    document.body.appendChild(piece);
    setTimeout(()=> piece.remove(), 7000);
  }, 140);
}

/* ---------- letter modal open/close ---------- */
function openModal(){
  // show the modal overlay & populate letter text into the modal (for nice framed look)
  const modal = document.getElementById('letterModal');
  modal.style.display = 'flex';
  const card = document.getElementById('letterCard');
  setTimeout(()=> card.classList.add('show'), 30);

  // bloom bouquet (if emoji) and reveal letter inline under final card too
  // reveal letterBox inside finalCard as well (so it's visible under modal area too)
  const letterBox = document.getElementById('letterBox');
  if(letterBox){
    letterBox.innerHTML = ''; // will copy the same text below
    // copy modal content into inline letterBox (keeps same text)
    const modalText = document.getElementById('modalLetterText');
    if(modalText) letterBox.innerHTML = '<div id="letterBoxInner" class="letter-frame">' + modalText.innerHTML + '</div>';
    letterBox.style.display = 'block';
  }

  // animate bouquet if emoji
  const emoji = document.getElementById('emojiBouquet');
  if(emoji){
    emoji.classList.add('bouquetVisible');
    Array.from(emoji.children).forEach((r,i)=>{
      r.style.transitionDelay = (i*60) + 'ms';
      r.style.transform = 'translateY(0) scale(1)';
      r.style.opacity = '1';
    });
  }
}

function closeModal(){
  const modal = document.getElementById('letterModal');
  const card = document.getElementById('letterCard');
  if(card) card.classList.remove('show');
  setTimeout(()=>{ if(modal) modal.style.display='none'; }, 220);
}

/* cleanup */
window.addEventListener('beforeunload', ()=>{
  if(window._heartsInterval) clearInterval(window._heartsInterval);
  if(window._confettiInterval) clearInterval(window._confettiInterval);
});

/* auto-run note: if user refreshes on final card it won't auto-open; everything runs when Yes clicked */
</script>
</body>
</html>
