<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>For Alya üíóüíå</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --pink1:#ffb6d9;
    --pink2:#ffd6eb;
    --accent:#ff2e88;
    --btn1:#ff4d9e;
    --soft:#fff6fc;
  }
  html,body{height:100%;margin:0;}
  body{
    font-family:"Poppins",system-ui,-apple-system,"Segoe UI",Roboto,Arial;
    background:linear-gradient(160deg,var(--pink1),var(--pink2));
    -webkit-font-smoothing:antialiased;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:18px;
    overflow-x:hidden;
    color:#222;
  }

  .card {
    width:100%;
    max-width:720px;
    text-align:center;
  }

  /* START SCREEN */
  #startScreen {
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:20px;
    padding:24px 0;
  }

  #envelope {
    width:260px;
    max-width:86vw;
    cursor:pointer;
    transition:transform .35s ease, filter .35s;
    filter:drop-shadow(0 12px 26px rgba(0,0,0,0.18));
    border-radius:18px;
  }
  #envelope:hover { transform:translateY(-6px) rotate(-2deg) scale(1.02); }

  .title {
    margin:0;
    font-family:"Playfair Display",serif;
    color:var(--accent);
    font-size:clamp(26px,4.4vw,44px);
  }

  .openBtn {
    background:linear-gradient(90deg,var(--btn1),#ff6fb0);
    color:white;
    border:none;
    padding:14px 36px;
    border-radius:36px;
    font-size:18px;
    box-shadow:0 10px 26px rgba(255,77,158,0.25);
    cursor:pointer;
  }
  .pulse { animation:pulse 1.6s infinite; }
  @keyframes pulse {
    0%{transform:scale(1);}
    50%{transform:scale(1.07);}
    100%{transform:scale(1);}
  }

  /* QUESTION SCREEN */
  #questionWrap{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:18px;
    padding:18px 0;
    position:relative; /* for absolutely-positioned No button */
  }

  #mainPhoto{
    width:86vw;
    max-width:420px;
    height:auto;
    border-radius:18px;
    object-fit:cover;
    box-shadow:0 14px 34px rgba(0,0,0,0.18);
  }

  .btnRow{
    display:flex;
    gap:16px;
    margin-top:6px;
    align-items:center;
    justify-content:center;
  }

  .yes, .no {
    border:none;
    padding:14px 30px;
    font-size:18px;
    border-radius:30px;
    cursor:pointer;
  }
  .yes {
    background:linear-gradient(90deg,#ff476e,#ff2e88);
    color:white;
    box-shadow:0 10px 22px rgba(255,46,136,0.22);
    transform-origin:center;
  }
  .no {
    background:#6a6a6a;
    color:white;
    box-shadow:0 6px 14px rgba(0,0,0,0.12);
    position:relative;
  }

  /* FINAL SCREEN */
  #finalWrap{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:18px;
    padding-bottom:40px;
    box-sizing:border-box;
    min-height:60vh;
  }

  #finalText{
    font-family:"Playfair Display",serif;
    font-size:clamp(22px,6vw,44px);
    color:var(--accent);
    text-shadow:0 6px 18px rgba(255,46,136,0.12);
    line-height:1.05;
    margin:18px 10px 6px 10px;
  }

  #finalPhoto{
    width:90vw;
    max-width:560px;
    max-height:58vh; /* prevents scrolling on most phones */
    object-fit:cover;
    border-radius:18px;
    box-shadow:0 18px 40px rgba(0,0,0,0.22);
  }

  /* floating hearts + confetti pieces (appended to body) */
  .floating-heart{
    position:fixed;
    bottom:-30px;
    pointer-events:none;
    z-index:9999;
    font-size:26px;
    filter:drop-shadow(0 6px 8px rgba(0,0,0,0.15));
    animation: floatUp linear forwards;
  }
  @keyframes floatUp {
    from{transform:translateY(0) rotate(0deg); opacity:1;}
    to{transform:translateY(-120vh) rotate(180deg); opacity:0;}
  }

  .confetti-piece{
    position:fixed;
    top:-24px;
    width:8px;
    height:12px;
    z-index:9998;
    opacity:0.95;
    transform-origin:center;
    filter:drop-shadow(0 6px 8px rgba(0,0,0,0.12));
    animation: fall linear forwards;
  }
  @keyframes fall {
    to{ transform: translateY(120vh) rotate(360deg); }
  }

  /* small helpers */
  .hidden{display:none!important;}
  @media(min-width:900px){
    #mainPhoto{max-width:480px;}
    #finalPhoto{max-width:720px; max-height:72vh;}
  }
</style>
</head>
<body>
  <div class="card" id="card">

    <!-- START SCREEN -->
    <div id="startScreen">
      <!-- inline onclick = guaranteed to work on mobile -->
      <img id="envelope" src="envelope.png.jpg" alt="Envelope for Alya" onclick="openLetter()" />
      <h1 class="title">For Alya üíå</h1>
      <button class="openBtn pulse" onclick="openLetter()">Open</button>
    </div>

  </div>

<script>
/* ---------- Globals for intervals so we can clear if needed ---------- */
window._heartsInterval = null;
window._confettiInterval = null;

/* ---------- OPEN LETTER (inline-safe) ---------- */
function openLetter(){
  const card = document.getElementById('card');

  // Small visual feedback (envelope tap)
  const env = document.getElementById('envelope');
  if(env) env.style.transform = 'scale(.98)';

  // Replace content with question screen HTML (inline onclick handlers used)
  card.innerHTML = `
    <div id="questionWrap">
      <img id="mainPhoto" src="mainphoto.jpg" alt="Alya">
      <h2 style="margin:0; font-family:'Playfair Display', serif; color:#ffffff; text-shadow:0 4px 18px rgba(0,0,0,0.22); font-size:clamp(20px,5vw,32px);">
        Will you be my Valentine? üíñ
      </h2>

      <div class="btnRow" style="margin-top:14px;">
        <!-- yes uses inline onclick to guard against timing issues -->
        <button class="yes" id="yesBtn" onclick="showFinal()">Yes üíï</button>
        <!-- no uses inline onclick and passes this reference so function can move it -->
        <button class="no" id="noBtn" onclick="noClicked(this)">No üò¢</button>
      </div>
    </div>
  `;
  // ensure envelope transform resets if present
  if(env) setTimeout(()=>{ if(env) env.style.transform=''; },300);
}

/* ---------- NO BUTTON BEHAVIOR (inline-safe) ---------- */
let _noIndex = 0;
let _yesScale = 1;
const noMsgs = [
  "Are you sure? ü•∫",
  "Really sure??",
  "Alya‚Ä¶ that's kinda cold üòî",
  "Think again...",
  "You sure about that?",
  "Okay now you're just testing me"
  "You dont love me"
];

function noClicked(el){
  // change text sequence
  if(_noIndex < noMsgs.length){
    el.textContent = noMsgs[_noIndex];
    _noIndex++;
  } else {
    el.textContent = "Still no? üò≠";
  }

  // grow the Yes button strongly
  _yesScale += 0.30;
  const yes = document.getElementById('yesBtn');
  if(yes){
    yes.style.transform = 'scale(' + _yesScale + ')';
    yes.style.transition = 'transform .22s ease';
  }

  // move the No button to a random safe spot inside viewport
  // position absolute relative to document body; keep within 6-85% bounds
  el.style.position = 'absolute';
  const left = Math.min(84, 6 + Math.random() * 78);
  const top  = Math.min(78, 8 + Math.random() * 68);
  el.style.left = left + '%';
  el.style.top  = top  + '%';
  el.style.zIndex = 9999;
}

/* ---------- FINAL SCREEN ---------- */
function showFinal(){
  const card = document.getElementById('card');

  // clear any existing intervals (defensive)
  if(window._heartsInterval){ clearInterval(window._heartsInterval); window._heartsInterval = null; }
  if(window._confettiInterval){ clearInterval(window._confettiInterval); window._confettiInterval = null; }

  // final HTML
  card.innerHTML = `
    <div id="finalWrap">
      <div id="finalText">You had no choice üòåüíï<br><br>Guess we have plans now.üòÅ</div>
      <img id="finalPhoto" src="finalphoto.jpg.jpg" alt="Us">
    </div>
  `;

  // start continuous visuals
  startHeartsContinuous();
  startConfettiContinuous();
}

/* ---------- Continuous hearts ---------- */
function startHeartsContinuous(){
  if(window._heartsInterval) clearInterval(window._heartsInterval);

  window._heartsInterval = setInterval(()=>{
    const heart = document.createElement('div');
    heart.className = 'floating-heart';
    heart.innerHTML = 'üíñ';
    heart.style.left = Math.random() * 100 + 'vw';
    const size = 18 + Math.random() * 26;
    heart.style.fontSize = size + 'px';
    const dur = 3500 + Math.random() * 1800;
    heart.style.animationDuration = dur + 'ms';
    document.body.appendChild(heart);
    setTimeout(()=> heart.remove(), dur + 200);
  }, 420);
}

/* ---------- Continuous confetti ---------- */
function startConfettiContinuous(){
  if(window._confettiInterval) clearInterval(window._confettiInterval);

  const colors = ['#ff2e88','#ffffff','#ffb6d9','#ff66b3','#ffd6eb','#ff4d9e'];

  window._confettiInterval = setInterval(()=>{
    const piece = document.createElement('div');
    piece.className = 'confetti-piece';
    piece.style.left = Math.random() * 100 + 'vw';
    piece.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
    // varied size & duration
    const w = 6 + Math.random() * 10;
    const h = 8 + Math.random() * 16;
    piece.style.width = w + 'px';
    piece.style.height = h + 'px';
    const dur = 2800 + Math.random() * 2200;
    piece.style.animationDuration = dur + 'ms';
    document.body.appendChild(piece);
    setTimeout(()=> piece.remove(), dur + 200);
  }, 140);
}

/* ---------- cleanup on leave ---------- */
window.addEventListener('beforeunload', ()=>{
  if(window._heartsInterval) clearInterval(window._heartsInterval);
  if(window._confettiInterval) clearInterval(window._confettiInterval);
});
</script>
</body>
</html>